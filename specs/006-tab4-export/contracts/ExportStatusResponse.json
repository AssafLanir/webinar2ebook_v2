{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "ExportStatusResponse",
  "description": "Response for GET /api/projects/{project_id}/ebook/export/status/{job_id}",
  "type": "object",
  "properties": {
    "data": {
      "oneOf": [
        {
          "type": "object",
          "properties": {
            "job_id": {
              "type": "string",
              "format": "uuid"
            },
            "status": {
              "type": "string",
              "enum": ["pending", "processing", "completed", "failed", "cancelled"]
            },
            "progress": {
              "type": "integer",
              "minimum": 0,
              "maximum": 100,
              "description": "Progress percentage (0-100)"
            },
            "download_url": {
              "type": ["string", "null"],
              "description": "Download URL when status is 'completed', null otherwise"
            }
          },
          "required": ["job_id", "status", "progress", "download_url"]
        },
        { "type": "null" }
      ]
    },
    "error": {
      "oneOf": [
        {
          "type": "object",
          "properties": {
            "code": {
              "type": "string",
              "enum": ["PROJECT_NOT_FOUND", "EXPORT_JOB_NOT_FOUND", "INTERNAL_ERROR"]
            },
            "message": {
              "type": "string"
            }
          },
          "required": ["code", "message"]
        },
        { "type": "null" }
      ]
    }
  },
  "required": ["data", "error"]
}
